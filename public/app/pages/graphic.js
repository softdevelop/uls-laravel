function humanized_time_span(e,t,r,n){function i(){for(var e=0;e<r[d].length;e++)if(null==r[d][e].ceiling||s<=r[d][e].ceiling)return r[d][e];return null}function o(){for(var e=s,t={},r=0;r<n.length;r++){var i=Math.floor(e/n[r][0]);e-=n[r][0]*i,t[n[r][1]]=i}return t}function a(e){var t=o(),r=e.text.replace(/\$(\w+)/g,function(){return t[arguments[1]]});return l(r,t)}function l(e,t){for(var r in t)if(1==t[r]){var n=new RegExp("\\b"+r+"\\b");e=e.replace(n,function(){return arguments[0].replace(/s\b/g,"")})}return e}if(r=r||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]},n=n||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]],"Invalid Date"==new Date(e))for(;-1!=String(e).indexOf("-");)e=e.replace("-","/");e=new Date(e),t=t?new Date(t):new Date;var s=(t-e)/1e3,d="past";return 0>s&&(d="future",s=0-s),a(i())}angular.module("user",[]),angular.module("permission",[]),angular.module("role",[]),angular.module("multiSelect",[]),angular.module("ticket",[]),angular.module("type",[]),angular.module("dataOption",[]),angular.module("nlcFilter",[]),angular.module("file",[]),angular.module("AppLanguage",[]),angular.module("TemplateManagerApp",[]),angular.module("RegionApp",[]),angular.module("campaignApp",[]),angular.module("campaignDetailApp",[]),angular.module("MarketsegmentApp",[]),angular.module("notification",[]),angular.module("transApp",[]),angular.module("assetManager",[]),angular.module("BlockApp",[]),angular.module("ChannelPartnersApp",[]),angular.module("roleGroup1",[]),angular.module("filedType",[]),angular.module("filed",[]),angular.module("term",[]),angular.module("customFormatDate",[]),angular.module("SeoAnalysisApp",[]),angular.module("pageApp",[]),angular.module("treeresizer",[]),angular.module("CreatePageApp",[]),angular.module("EditDraftApp",[]),angular.module("fomatHtml",[]),angular.module("colorpicker.module",[]),angular.module("formBuilderDirectiveApp",[]),angular.module("appManageTerm",[]),angular.module("TermTemplateManagerApp",[]),angular.module("configurator",[]),angular.module("TemplateContentManager",[]),angular.module("cmsContentFolderApp",[]),angular.module("lowercaseCharater",[]),angular.module("selectLevel",[]),angular.module("modalSelectLevel",[]),angular.module("configField",[]),angular.module("cmsContentInsertApp",[]),angular.module("confirmDirective",[]),angular.module("CmsApp",[]),angular.module("checkLimitAndChangeDateTimeDirectiveApp",[]),angular.module("tagContentApp",[]),angular.module("tagContentDirective",[]),angular.module("cmsContentTagApp",[]),angular.module("viewDraft",[]),angular.module("databaseManager",[]),angular.module("selectLevelDatabase",[]),angular.module("modalSelectPage",[]),angular.module("configFormDatabaseApp",[]),angular.module("historyApp",[]),angular.module("BlockNestedApp",[]),angular.module("selectLevelAsset",[]),angular.module("MaterialApp",[]),angular.module("draganddrop",[]),angular.module("activityLog",[]),angular.module("translation",[]),angular.module("HelpEditorApp",[]),angular.module("helpEditorDirective",[]),angular.module("selectLevelHelp",[]),angular.module("cache",[]),angular.module("file",[]),angular.module("treeresize",[]),angular.module("test",[]),angular.module("guide",[]),angular.module("PlatformsApp",[]),angular.module("accessories",[]);var defaultModules=["ui.bootstrap","ngResource","ngCookies","ngFileUpload","ngRoute","toggle-switch","ngImgCrop","ngTable","user","role","permission","multiSelect","ticket","type","dataOption","nlcFilter","file","xeditable","timer","AppLanguage","TemplateManagerApp","RegionApp","campaignApp","campaignDetailApp","MarketsegmentApp","notification","transApp","assetManager","BlockApp","ChannelPartnersApp","roleGroup1","filedType","filed","term","ui-iconpicker","customFormatDate","SeoAnalysisApp","pageApp","treeresizer","CreatePageApp","EditDraftApp","fomatHtml","colorpicker.module","formBuilderDirectiveApp","appManageTerm","TermTemplateManagerApp","mgo-angular-wizard","configurator","TemplateContentManager","cmsContentFolderApp","lowercaseCharater","selectLevel","configField","cmsContentInsertApp","confirmDirective","CmsApp","checkLimitAndChangeDateTimeDirectiveApp","tagContentApp","tagContentDirective","cmsContentTagApp","viewDraft","modalSelectLevel","databaseManager","selectLevelDatabase","modalSelectPage","configFormDatabaseApp","historyApp","BlockNestedApp","selectLevelAsset","MaterialApp","ui.sortable","activityLog","translation","HelpEditorApp","helpEditorDirective","selectLevelHelp","cache","file","treeresize","guide","PlatformsApp","accessories"];"undefined"!=typeof modules&&(defaultModules=defaultModules.concat(modules));var myApp=angular.module("uls",defaultModules);angular.module("uls").run(["editableOptions",function(e){e.theme="bs3"}]),angular.module("uls").config(["$logProvider",function(e){e.debugEnabled(window.debug)}]),"undefined"!=typeof angularMock&&(defaultModules=defaultModules.concat(angularMock));var goTo=function(e){window.location.href="#_"+e,$("#fix-modal-top").scrollTop(0),$("#"+e).hasClass("in")||$("#"+e).prev().trigger("click")};myApp.config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){e.defer();return{responseError:function(t){var r=angular.element(".butterbar-container");switch(t.status){case 401:return void(window.location.href=window.baseUrl);case 404:r.hasClass("hidden")&&r.removeClass("hidden");break;case 500:r.hasClass("hidden")&&r.removeClass("hidden")}return e.reject(t)}}}])}]),function(e){function t(){var t=window.innerHeight;screen.height;e(".table-responsive.set-height, .table-responsive#tb-group-user").css({height:t-170+"px"}),e(".table-animate").css({height:t-170+"px"}),e("#search-page,.box-maps").css({height:t-105+"px"}),e(".box-list-rep").css({height:t-100+"px"}),e("#load-maps").css({height:t-185+"px"})}e(document).ready(t),e(window).resize(t),e(document).ready(function(){e(".dropdown-menu table tr td button").removeAttr("style")}),e(document).ready(function(){setTimeout(function(){var t=e("#frame_html").contents().find("head");t.append('<style type="text/css">.area_toolbar{background-color:#f1f1f1;}#editor{border:solid #ccc 1px}#result{border-top:solid #ccc 1px;border-bottom: solid #ccc 1px}.editarea_popup{box-shadow: 0px 4px 36px rgba(177, 177, 177, 0.75);border: solid 1px #CCCCCC;background-color: #FFFFFF;}.area_toolbar select{font-size:9pt;background-color:#fff}</style>')},1e3)}),e(window).load(function(){e(".step3 .show-more").click(function(){e(".step3 .wrap-more-product").toggleClass("show")})}),e(document).ready(function(){e(".nav-icon").click(function(){e(this).toggleClass("open"),e("#pagehome").toggleClass("on-off")})});var r,n,i,o,a,l,s;e(".next").click(function(){return s?!1:(s=!0,r=e(this).parent(),n=e(this).parent().next(),n.show(),void r.animate({opacity:0},{step:function(e,t){l=1-.2*(1-e),o=50*e+"%",a=1-e,r.css({transform:"scale("+l+")"}),n.css({left:o,opacity:a})},duration:800,complete:function(){r.hide(),s=!1},easing:"easeInOutBack"}))}),e(".previous").click(function(){return s?!1:(s=!0,r=e(this).parent(),i=e(this).parent().prev(),i.show(),void r.animate({opacity:0},{step:function(e,t){l=.8+.2*(1-e),o=50*(1-e)+"%",a=1-e,r.css({left:o}),i.css({transform:"scale("+l+")",opacity:a})},duration:800,complete:function(){r.hide(),s=!1},easing:"easeInOutBack"}))}),e(".submit").click(function(){return!1})}(jQuery),angular.module("uls").controller("BaseController",["$scope","$parse","$timeout","$modal","UserService","AssetManagerService",function(e,t,r,n,i,o){if(angular.element(".wrapper").removeClass("hidden"),i.setData(window.usersMap),r(function(){"undefined"!=typeof e.callbackLoadUserFinish&&(e.callbackLoadUserFinish(),e.users_map=i.getUsersMap())}),e.testFuture=window.testFuture,1==e.testFuture&&angular.element(".test").removeClass("hidden"),e.windowType=window.info,"undefined"!=typeof window.info)for(var a in window.info){var l=t(a);l.assign(e,window.info[a])}e.initDate=function(){angular.element(".date").bdatepicker({format:"yyyy-mm-dd"})},e.viewModalImage=function(e){var t=n.open({templateUrl:baseUrl+"/app/components/termTemplateManager/views/modal/viewImage.html",controller:"ModalViewPictureCtrl",size:void 0,windowClass:"show-img",resolve:{fileId:function(){return e}}});t.result.then(function(e){},function(){})},e.urlForm=[],e.getUrlImageAssetForm=function(t,r){"undefined"==typeof e.urlForm[t]&&(e.urlForm[t]=[]),o.getUrlImageAsset(t).then(function(n){e.urlForm[t][r]=n.url})},e.removeThumbnailAssertForm=function(t,r){e.urlForm[t][r]=""},e.initTooltip=function(e){$('[data-toggle="tooltip"]').tooltip()}}]).controller("ModalViewPictureCtrl",["$scope","$modalInstance","fileId",function(e,t,r){e.fileId=r,e.baseUrl=baseUrl,e.cancel=function(){t.dismiss("cancel")}}]);var userModule=angular.module("user");userModule.factory("UserResource",["$resource",function(e){return e("/api/user/:method/:id",{method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"}})}]).factory("UserService",["$q","$filter","UserResource",function(e,t,r){var n=[],i=[],o=[],a=this,l={},s={};return this.setHashData=function(e){l=e},this.create=function(t){if("undefined"!=typeof t.id)return a.update(t);var i=e.defer(),o=new r(t);return o.$save({},function(e){e.status&&e.item&&(n.push(e.item),"undefined"==typeof e.item.last_login&&(e.item.last_login="0000-00-00 00:00:00")),i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.changePassword=function(t){var n=e.defer(),i=new r(t);return i.$save({method:"change-password",id:t.id},function(e){e.status?n.resolve(e):n.reject(e)},function(e){n.reject(e.data)}),n.promise},this.changeRoles=function(t){var n=e.defer(),i=new r(t);return i.$save({method:"change-roles"},function(e){e?n.resolve(e):n.reject(e)},function(e){n.reject(e.data)}),n.promise},this.update=function(t){var i=e.defer(),o=new r(t);return o.$update({id:t.id},function(e){if(e.status)for(var t in n)if(n[t].id==e.item.id){n[t]=e.item;break}i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.get=function(t){var n=e.defer();return r.get({id:t},function(e){n.resolve(e)}),n.promise},this.query=function(){var t=e.defer();return r.query(function(e){n=e,t.resolve(e)}),t.promise},this.queryUsersManager=function(){var t=e.defer();return r.query({method:"get-all-user-manager"},function(e){n=e,t.resolve(e)}),t.promise},this.remove=function(t){var i=e.defer();return r["delete"]({id:t},function(e){if(e.status)for(var r in n)if(n[r].id==t){n[r].status="no";break}i.resolve(e)}),i.promise},this.pushUser=function(e){n.push(e)},this.updateUser=function(e){for(var t in n)if(n[t].id==e.id){e.status="yes",n[t]=e;break}},this.changeAvatar=function(t,n){var i=e.defer();return r.save({method:"change-avatar",file:n,id:t},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.resetPassword=function(t){var n=e.defer();return r.save({method:"email",entity:"password",email:t},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.getUsers=function(){return n},this.getUserById=function(e){return s[e]},this.getUsersMap=function(){return s},this.listMap=function(e,t){if("role"==t)for(var r in e)i[e[r].id]=e[r];else for(var r in e)o[e[r].id]=e[r]},this.getMap=function(e){return"role"==e?i:o},this.userBranchManager=function(t){var n=e.defer();return r.query({id:t,method:"get-users-branch-manager"},function(e){n.resolve(e)}),n.promise},this.updatePermissions=function(t,n){var i=e.defer();return r.save({id:t,permissionIds:n,method:"update-permission"},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.updateGroup=function(t,n){var i=e.defer();return r.save({id:t,groupIds:n,method:"update-group"},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.updateRoles=function(t,n){var i=e.defer();return r.save({id:t,roleIds:n,method:"update-role"},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.changeStatus=function(t){var i=e.defer();return r["delete"]({id:t,method:"change-status"},function(e){if(e.status)for(var r in n)if(n[r].id==t){n[r].status="yes";break}i.resolve(e)}),i.promise},this.setData=function(e){n=e;for(var t in e)s[e[t].id]=e[t];return n},this.updateShowDueDateUser=function(t){var n=e.defer(),i=new r(t);return i.$save({method:"update-show-due-date-user"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this}]);var assetmanagerApp=angular.module("assetManager",["ngResource","ui.bootstrap","ngSanitize","ngTable"]);assetmanagerApp.factory("AssetManagerResource",["$resource",function(e){return e("/api/asset-manager/:method/:id",{method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"},editNameFolder:{method:"edit-name-folder"}})}]).service("AssetManagerService",["AssetManagerResource","$q",function(e,t){var r=this,n=[];this.createFolderProvider=function(n){if("undefined"!=typeof n.id)return r.editFolderAndFile(n);var i=t.defer(),o=new e(n);return o.$save({method:"create-folder"},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.uploadNewAsset=function(r){var i=t.defer(),o=new e(r);return o.$save({method:"upload-new-asset"},function(e){0!=e.status&&n.push(e.item),i.resolve(e.item)},function(e){i.resolve(e.data)}),i.promise},this.createNewAsset=function(r){var i=t.defer(),o=new e(r);return o.$save({method:"create-new-asset"},function(e){0!=e.status&&n.push(e.item),i.resolve(e.item)},function(e){i.resolve(e.data)}),i.promise},this.saveFieldFile=function(r){var n=t.defer(),i=new e(r);return i.$save({method:"save-file-asset"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.editFile=function(r){var n=t.defer(),i=new e(r);return i.$save({method:"edit-file"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.crop=function(r){var n=t.defer(),i=new e(r);return i.$save({method:"crop"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.addTagsForPage=function(r,n){var i=t.defer(),o=new e(n);return o.$save({id:r,method:"add-tags"},function(e){0!=e.status,i.resolve(e)},function(e){i.resolve(e.data)}),i.promise},this.getAssetManagerById=function(r){var n=t.defer(),i=new e;return i.$get({id:r},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setAssetManagers=function(e){return n=e},this.getAssetManagers=function(){return n},this.getUrlImageAsset=function(r){var n=t.defer();return e.get({id:r,method:"get-url-image-asset"},function(e){n.resolve(e)}),n.promise},this.deleteFolderAndAsset=function(r){var n=t.defer(),i=new e;return i.$delete({id:r},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.deleteAssetFile=function(r){var n=t.defer(),i=new e;return i.$get({id:r,method:"delete-file"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.editNameFolder=function(r){var n=t.defer(),i=new e(r);return i.$save({id:r.id,method:"edit-name-folder"},function(e){0!=e.status&&n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.updateContentFile=function(r,n){var i=t.defer(),o=new e(n);return o.$save({id:r,method:"update-content-file"},function(e){i.resolve(e)},function(e){i.resolve(e.data)}),i.promise}}]),angular.module("uls").controller("NotificationController",["$scope","$filter","NotificationService","$controller","$timeout",function(e,t,r,n,i){function o(){}function a(){if(f=!1,c.length>0){var e=c.shift();s(e)}}function l(){}function s(t){if(f)return void c.push(t);if(f=!0,-1==t.data.sender_id)var r=e.baseUrl+"/160x160_avatar_default.png?t=1";else var r=e.users_map[t.data.sender_id].avatar;var n=new Notify("Notification",{icon:r,body:t.data.message,tag:t.data.sender_id,notifyShow:o,notifyClose:a,notifyClick:function(){window.location.href="/"+t.data.href},notifyError:l,timeout:5});n.show()}n("BaseController",{$scope:e}),e.callbackLoadUserFinish=function(){},angular.element("#notification-top").removeClass("hidden"),e.baseUrl=window.baseUrl;var d=10;e.limitTo=d;var u=1;e.notifications=[];var c=[],f=!1;e.amount=0,$(".scroll-noti1").scroll(function(){$(this)[0].scrollHeight-$(this).scrollTop()===$(this).outerHeight()&&e.$apply(function(){e.limitTo=e.limitTo+d})});var p=RowboatPusher.subscribe("notification_ticket");p.bind("Rowboat\\Notification\\Events\\Notifications\\Broadcast\\NotificationTicket",function(t){e.$apply(function(){"undefined"!=typeof t.data.user_id&&-1!=t.data.user_id.indexOf(window.userId)&&(s(t),u=1,e.amount++)})}),e.getNotifications=function(){r.query(u).then(function(t){u&&e.setUserReadThisNotification(),e.notifications=t,e.hightlight=angular.copy(e.amount),e.amount=0,u=0})},e.setUserReadThisNotification=function(){r.setRead().then(function(){})},r.getAmountNotificationsNotRead().then(function(t){e.amount=t.result})}]);var permissionModule=angular.module("notification");permissionModule.factory("NotificationResource",["$resource",function(e){return e("/api/notification/:method/:id",{},{add:{method:"post"},save:{method:"post"}})}]).service("NotificationService",["$q","$filter","NotificationResource",function(e,t,r){var n=[];this.getAmountNotificationsNotRead=function(t){var n=e.defer();return r.get({method:"amount-notifications-not-read"},function(e){n.resolve(e)}),n.promise},this.query=function(t){var i=e.defer();return t?r.query().$promise.then(function(e){n=e,i.resolve(n)}):i.resolve(n),i.promise},this.notificationInvite=function(t){var n=e.defer(),i=new r(t);return i.$save({data:t,method:"invite"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setRead=function(){var t=e.defer(),n=new r;return n.$save({method:"set-read"},function(e){t.resolve(e)},function(e){t.resolve(e.data)}),t.promise}}]),notificationModule=angular.module("notification"),notificationModule.directive("notification",[function(){return{restrict:"AE",scope:{item:"="},replace:!0,templateUrl:baseUrl+"/app/shared/notification/views/notification.html",link:function(){}}}]);var module=angular.module("uls");module.directive("rowboatRequired",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){"undefined"==typeof e.$eval(r.ngModel)&&n.$setValidity("rowboatRequired",!1),t.on("focus",function(i){e.$watch(r.ngModel,function(e){var r="undefined"!=typeof e&&0!=e.length;if(r)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatRequired",r);else if(0==t.parent().find("span").length){t.parent().addClass("error");var i='<span class="control-label">It is required</span>';t.parent().append(i),n.$setValidity("rowboatRequired",r)}})})}}}),module.directive("rowboatLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){"undefined"!=typeof e.$eval(r.ngModel)&&e.$eval(r.ngModel).length!=r.rowboatLength&&n.$setValidity("rowboatLength",!1),t.on("focus",function(i){e.$watch(r.ngModel,function(e){var i=r.rowboatLength,o="undefined"!=typeof e&&e.length==i;if(o)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatLength",o);else if(0==t.parent().find("span").length){t.parent().addClass("error");var a='<span class="control-label">Length is '+i+"</span>";t.parent().append(a),n.$setValidity("rowboatLength",o)}})})}}}),module.directive("rowboatMinLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){"undefined"!=typeof e.$eval(r.ngModel)&&e.$eval(r.ngModel).length<r.rowboatMinLength&&n.$setValidity("rowboatMinLength",!1),t.on("focus",function(i){e.$watch(r.ngModel,function(e){var i=r.rowboatMinLength,o="undefined"!=typeof e&&e.length>=i;if(o)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatMinLength",o);else if(0==t.parent().find("span").length){t.parent().addClass("error");var a='<span class="control-label">Min length is '+i+"</span>";t.parent().append(a),n.$setValidity("rowboatMinLength",o)}})})}}}),module.directive("rowboatMaxLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){"undefined"!=typeof e.$eval(r.ngModel)&&e.$eval(r.ngModel).length>r.rowboatMaxLength&&n.$setValidity("rowboatMaxLength",!1),t.on("focus",function(i){e.$watch(r.ngModel,function(e){var i=r.rowboatMaxLength,o="undefined"!=typeof e&&e.length<=i;if(o)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatMaxLength",o);else if(0==t.parent().find("span").length){t.parent().addClass("error");var a='<span class="control-label">Max length is '+i+"</span>";t.parent().append(a),n.$setValidity("rowboatMaxLength",o)}})})}}}),module.directive("rowboatEmailPattern",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){$pattern=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,"undefined"==typeof e.$eval(r.ngModel)&&n.$setValidity("rowboatEmailPattern",!1),t.on("blur",function(i){e.$watch(r.ngModel,function(e){var r="undefined"!=typeof e&&$pattern.test(e);if(r)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatEmailPattern",r);else if(0==t.parent().find("span").length){t.parent().addClass("error");var i='<span class="control-label">Email Invalid</span>';t.parent().append(i),n.$setValidity("rowboatEmailPattern",r)}})})}}});var filterDate=angular.module("customFormatDate",[]);filterDate.filter("myDate",["$filter",function(e){return function(t,r){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var n=e("date")(new Date(String(t)),angular.isUndefined(r)?"MM-dd-yyyy":r);return String(n)}}]).filter("myDateL",["$filter",function(e){return function(t){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var r=e("date")(new Date(String(t)),"MMMM d, y");return String(r)}}]).filter("myDateTime",["$filter",function(e){return function(t){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var r=e("date")(new Date(String(t)),"MM-dd-yyyy HH:mm:ss");return String(r)}}]).filter("myDateShortTime",["$filter",function(e){return function(t){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var r=e("date")(new Date(String(t)),"MM-dd-yyyy h:mma");return String(r)}}]).filter("clientDate",["$filter",function(e){return function(t,r){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";t=new Date(t),t=new Date(parseInt(new Date(t).getTime())-60*parseInt((new Date).getTimezoneOffset())*1e3);var n=e("date")(new Date(String(t)),angular.isUndefined(r)?"MM-dd-yyyy":r);return String(n)}}]).filter("clientDateTime",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.dateTimeFormat)}}]).filter("clientLogDate",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.logDate)}}]).filter("clientMediumDate",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.mediumDate)}}]).filter("clientShortTime",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.shortTime)}}]).filter("clientShortTimeFollowTimezone",["$filter",function(e){return function(t,r){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var n=e("date")(new Date(String(t)),window.shortTime);return String(n)}}]).filter("formatCurrentDate",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getMonth()+"-"+e.getDate()+"-"+e.getFullYear();return String(t)}}]).filter("formatCurrentTime",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getHours()>=12?"pm":"am",r=parseInt(e.getHours())%12;r=r?10>r?"0"+r:r:12;var n=parseInt(e.getMinutes())<10?"0"+e.getMinutes():e.getMinutes(),i=parseInt(e.getSeconds())<10?"0"+e.getSeconds():e.getSeconds(),o=r+"-"+n+"-"+i+" "+t;return String(o)}}]).filter("formatCurrentShortTime",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getHours()>=12?"pm":"am",r=parseInt(e.getHours())%12;r=r?10>r?"0"+r:r:12;var n=parseInt(e.getMinutes())<10?"0"+e.getMinutes():e.getMinutes(),i=r+":"+n+" "+t;return String(i)}}]);var checkInvalid=function(e,t){if(null==e)return"";if("Invalid Date"==new Date(e))for(;-1!=String(e).indexOf("-");)e=e.replace("-","/");return"Invalid Date"==new Date(e)?"":(e=new Date(e),e=new Date(parseInt(new Date(e).getTime())-60*parseInt((new Date).getTimezoneOffset())*1e3),new Date(String(e)))};angular.module("nlcFilter").filter("elapsedtime",function(){return function(e){return humanized_time_span(e)}});var translation=angular.module("translation",[]);translation.filter("trans",["$filter",function(e){return function(e,t){return null==e?"":window.translations[t][e]}}]);var selectLevel=angular.module("helpEditorDirective",[]),version=5;selectLevel.directive("helpEditorDirective",["$timeout","$filter",function(e,t){return{require:"?ngModel",restrict:"EA",scope:{items:"=",text:"@",selectedItems:"=selectedItem",onClick:"&"},replace:!0,templateUrl:baseUrl+"/app/components/user/help-editor/view/view-help.html?v="+(new Date).getTime(),link:function(t,r,n,i){t.description="",t.recursiveGetDescription=function(e){angular.forEach(e,function(e,r){e.parent=!1,t.description+='<strong class="space-topic" id="_'+e._id+'">'+e.name+"</strong>"+e.description,e.subFolder.length>0&&t.recursiveGetDescription(e.subFolder)})},t.getDesctiption=function(){angular.forEach(t.items,function(e,r){e.parent=!0,t.description+='<h4 id="_'+e._id+'" class="c-primary">'+e.name+'</h4><div class="space-area user-ad-area">'+e.description,t.recursiveGetDescription(e.subFolder),t.description+="</div>"})},t.getDesctiption(),t.goToAnchorWithId=function(e){window.location.href="#"+e,$("#fix-modal-top").scrollTop(0)},e(function(){$(".sub-select-"+t.items[0]._id).addClass("in")})}}}]),angular.module("treeresize",[]).directive("resizer",["$document",function(e){return function(t,r,n){function i(e){$("#tree-file").unbind();var t=e.pageX-50;n.resizerMax&&t>n.resizerMax&&(t=parseInt(n.resizerMax)),r.css({left:t+"px"}),$(n.resizerLeft).css({width:t+"px"}),$(n.resizerRight).css({left:t+parseInt(n.resizerWidth)+"px"})}function o(){e.unbind("mousemove",i),e.unbind("mouseup",o)}$("#tree-file").css({width:"300px"}),r.on("mousedown",function(t){t.preventDefault(),e.on("mousemove",i),e.on("mouseup",o)})}}]),angular.module("treeresizer",[]).directive("resizer",["$document",function(e){return function(t,r,n){function i(){var e=$(window).outerHeight(),t=$(".navibar-uls").outerHeight(),r=$(".top-content").outerHeight();$(".content").height(e-(t+r+19))}function o(e){var t=$("#sidebar").outerWidth();$("#resize-left").unbind();var i=e.pageX-t;n.resizerMax&&i>n.resizerMax&&(i=parseInt(n.resizerMax)),r.css({left:i+"px"}),$(n.resizerLeft).css({width:i+"px"}),$(n.resizerRight).css({left:i+parseInt(n.resizerWidth)+"px"})}function a(){e.unbind("mousemove",o),e.unbind("mouseup",a)}i(),$(window).resize(i),r.on("mousedown",function(t){t.preventDefault(),e.on("mousemove",o),e.on("mouseup",a)})}}]);var fileModule=angular.module("file");fileModule.controller("FileController",["$scope","FileService","shareDataFactory","$modal","$timeout","$filter",function(e,t,r,n,i,o){e.currentFolderId=0,e.file_data={},e.breadcumb="Graphics",e.items=window.files,e.listNameUser=window.listNameUser,e.nameFolder=[],t.setFiles(angular.copy(e.items)),t.formatFilesWitFolderId(),angular.element(".document-page").removeClass("hidden"),e.$watch(function(){return window.files},function(t){if(angular.isDefined(window.foldersParent))for(var r=0;r<window.foldersParent.length;r++)e.nameFolder[window.foldersParent[r].id]=window.foldersParent[r],e.items.push(window.foldersParent[r])}),e.reload=function(){location.reload()},e.viewModel=function(e){var t=n.open({templateUrl:baseUrl+"/app/shared/file-manager/views/viewPicture.html",controller:"ModalViewPictureCtrl",size:void 0,windowClass:"show-img",resolve:{fileId:function(){return e}}});t.result.then(function(e){},function(){})},e.reloadTree=function(t){e.tree.reload(e.folders).done(t)},e.initTree=function(){var t=angular.element("#tree").fancytree({extensions:["glyph"],glyph:{map:{expanderClosed:"glyphicon glyphicon-plus-sign",expanderLazy:"glyphicon glyphicon-plus-sign",expanderOpen:"glyphicon glyphicon-minus-sign",folder:"glyphicon glyphicon-folder-close",folderOpen:"glyphicon glyphicon-folder-open",loading:"glyphicon glyphicon-refresh"}},autoScroll:!0,source:e.folders,activate:function(t,r){var n=r.node;e.changeBreadcrumb(n),n.setExpanded(!0),e.$$phase?(e.currentFolderId=n.key,e.getFilesByFolderId()):e.$apply(function(){e.currentFolderId=n.key,e.getFilesByFolderId()})},create:function(){"undefined"!=typeof callback&&callback()}});if(e.tree=t.fancytree("getTree"),angular.isDefined(window.folderRootId)){var r=e.tree.getNodeByKey(window.folderRootId.toString());angular.isDefined(r)&&r.setActive(!0)}},e.addFolder=function(t){var r=n.open({templateUrl:baseUrl+"/app/components/file/views/modal/addFolder.html",controller:"ModalAddFolder",size:void 0,resolve:{currentFolderId:function(){return e.currentFolderId},store:function(){return t}}});r.result.then(function(t){if(0==t.newFolder.parent_id){e.folders.push(t.newFolder),e.initTree();var r=e.tree.getNodeByKey(t.newFolder.key.toString());r.setActive(!0)}else{e.tree.getActiveNode().addChildren(t.newFolder);var r=e.tree.getNodeByKey(t.newFolder.key.toString());r.setActive(!0)}},function(){})},e.deleteFolder=function(r,i){e.positionDeleteFolder=i,"undefined"!=typeof r&&(e.currentFolderId=r);var o=n.open({templateUrl:baseUrl+"/app/components/file/views/modal/deleteFolder.html",controller:"ModalDeleteFolder",size:void 0,resolve:{currentFolderId:function(){return e.currentFolderId},name:function(){var t=e.tree.getNodeByKey(e.currentFolderId.toString());return t.title}}});o.result.then(function(r){var n=r.id;if("main"==e.positionDeleteFolder){angular.isDefined(n)||(n=e.currentFolderId);var i=e.tree.getNodeByKey(n);e.currentFolderId=i.data.parent_id,i&&i.remove(),e.items=t.getFilesCurrentFolder()}else{var o=e.tree.getActiveNode(),a=e.tree.getNodeByKey(o.parent.key);e.tree.getActiveNode().remove(),e.items=[],a.setActive(!0)}if("undefined"!=typeof r.files)for(var l in e.items)for(var s in r.files)if(e.items[l].id==r.files[s].id){delete e.items[l];break}if(angular.isDefined(r.folder)&&0==r.folder.parent_id){e.currentFolderId=0;for(var l in e.folders)if(e.folders[l].key==r.folder.id){e.folders.splice(l,1);break}}},function(){})},e.getFilesByFolderId=function(){var r=[],n=e.tree.getActiveNode().getChildren();r=angular.copy(t.getFileFolderMap()[e.currentFolderId]),"undefined"==typeof r&&(r=[]);for(var i in n)r.push({id:n[i].key,file_name:n[i].title,created_at:n[i].data.created_at,group:"folder",user_id:n[i].data.user_id,parent_id:n[i].data.parent_id,visible:n[i].data.visible});e.items=r},e.$on("editFile",function(){if("folder"==r.data.group){var n=e.tree.getNodeByKey(r.data.id.toString());n.setTitle(r.data.name)}if(t.formatFilesWitFolderId(),r.data.folder_id>0||r.data.parent_id>0)e.items=o("orderBy")(t.getFilesCurrentFolder(),"file_name");else if(0==r.data.parent_id){for(var i in window.foldersParent)if(window.foldersParent[i].id==r.data.id){
window.foldersParent[i]=r.data;break}e.items=o("orderBy")(t.getData(),"file_name")}}),e.deleteFile=function(r){angular.element("#page-loading").css("display","block"),t.remove(r).then(function(r){return!r.status&&r.error?(alert(r.error+" Refresh this page."),void(window.location.href=window.baseUrl+"/document-manager")):(t.formatFilesWitFolderId(),e.items=t.getFilesCurrentFolder(),void angular.element("#page-loading").css("display","none"))})},e.visibleFolder=function(r){e.idFolderVisible=r,angular.element("#page-loading").css("display","block"),t.visibleFolder(r).then(function(r){if(angular.element("#page-loading").css("display","none"),r.status){if(t.formatFilesWitFolderId(),e.items=t.getFilesCurrentFolder(),angular.isDefined(e.idFolderVisible)){var n=$("#tree").fancytree("getTree"),i=n.getNodeByKey(e.idFolderVisible.toString());angular.isDefined(i)&&(i.data.visible=r.visible)}}else r.error&&(alert(r.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager")})},e.activeFolder=function(t){var r=e.tree.getNodeByKey(t.toString());r.parent.setExpanded(!0),e.changeBreadcrumb(r),angular.element(r.li).trigger("click")},e.changeBreadcrumb=function(t){var r=Object.create(t);for(e.breadcumbItems=[],e.breadcumbItems.push(r);t.parent&&"root"!=t.parent.title;)e.breadcumbItems.push(t.parent),t=t.parent;e.breadcumbItems=e.breadcumbItems.reverse()},e.addFile=function(t){var r=angular.copy(e.items);r.push(t),e.items=r}}]).controller("ModalAddFolder",["$scope","$timeout","$modalInstance","FileService","currentFolderId","store",function(e,t,r,n,i,o){e.folder={},e.folder.parent_id=i,"undefined"!=typeof o&&(e.folder.store=o),e.addFolder=function(t){e.submitted=!0,t||(angular.element("#add-folder-graphic").attr("disabled","true"),n.addFolder(e.folder).then(function(e){return e.status?void r.close(e):void(e.error&&(alert(e.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager"))}))},e.cancel=function(){r.dismiss("cancel")}}]).controller("ModalDeleteFolder",["$scope","$modalInstance","FileService","currentFolderId","name",function(e,t,r,n,i){e.currentFolderId=n,e.name=i,e.deleteFolder=function(){r.deleteFolder(e.currentFolderId).then(function(e){return e.status?void t.close(e):void(e.error&&(alert(e.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager"))})},e.cancel=function(){t.dismiss("cancel")}}]).controller("ModalViewPictureCtrl",["$scope","$modalInstance","fileId",function(e,t,r){e.fileId=r,e.baseUrl=baseUrl,e.cancel=function(){t.dismiss("cancel")}}]);var fileModule=angular.module("file");fileModule.factory("FileResource",["$resource",function(e){return e("/admin/document-manager/:method/:id",{},{add:{method:"post"},save:{method:"post"},update:{method:"put"}})}]).factory("shareDataFactory",["$rootScope",function(e){var t={};return t.data="",t.prepForBroadcase=function(e,t){this.data=e,this.broadcastItem(t)},t.broadcastItem=function(t){e.$broadcast(t)},t}]).service("FileService",["$q","$filter","FileResource",function(e,t,r){var n=[],i=[],o=[],a=[],l=[],s=[],d=[];this.create=function(t){var n=e.defer(),i=new r(t);return i.$save({},function(e){e.status?n.resolve(e):n.resolve(null)},function(e){n.resolve(null)}),n.promise},this.fileShare=function(t){var n=e.defer(),i=new r(t);return i.$save({id:t.fileId,method:"file-share"},function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},this.deleteFileUserShare=function(t){var n=t.folder_id;"undefined"!=typeof t.file_id&&(n=t.file_id);var i=e.defer();return r["delete"]({id:n,method:"delete-file-user-share",userShareId:t.user_id,group:t.group},function(e){i.resolve(e)}),i.promise},this.getChildFolders=function(t){var n=e.defer();return r.query({id:t,method:"get-child-folders"},function(e){n.resolve(e)}),n.promise},this.getFilesFolder=function(){return i},this.getFiles=function(){return n},this.update=function(t){var n=e.defer(),i=new r(t);return i.$save({id:t._id},function(e){e.status?n.resolve(e):n.resolve(null)},function(e){n.resolve(null)}),n.promise},this.get=function(t,n){var i=e.defer();return r.get({id:t,prefix:n},function(e){i.resolve(e)}),i.promise},this.getAllOfUser=function(t){var n=e.defer();return r.query({created_at:t,method:"file-all"},function(e){for(var t in e)a[e[t].id]=e[t];n.resolve(e)}),n.promise},this.pushFilesOfUser=function(e){filesFormat=[];for(var t in e)a.push(e[t]);return a},this.getFilesOfUser=function(){return a},this.query=function(){var t=e.defer();return n&&n.length?t.resolve(n):r.query().$promise.then(function(e){n=e,t.resolve(n)}),t.promise},this.remove=function(t){var i=e.defer();new r(t);return r["delete"]({id:t},function(e){if(e.status){for(var r in d)if(d[r].id==t){d.splice(r,1);break}for(var r in n)if(n[r].id==t){n.splice(r,1);break}}i.resolve(e)}),i.promise},this.visibleFolder=function(t){var i=e.defer(),o=new r(t);return o.$save({id:t,method:"visible-folder"},function(e){if(e.status){for(var r in d)if(d[r].id==t){d[r].visible=e.visible;break}for(var r in n)if(n[r].id==t){n.splice(r,1);break}}i.resolve(e)}),i.promise},this.deleteFolder=function(t){var n=e.defer();return r["delete"]({id:t,method:"delete-folder"},function(e){if(e)for(var r in d)if(d[r].id==t){d.splice(r,1);break}n.resolve(e)}),n.promise},this.setFiles=function(e){n=e},this.pushFiles=function(e){n.push(e)},this.setFilesCurrentFolder=function(e){d=e},this.getFilesCurrentFolder=function(e){return d},this.pushFile=function(e){l=[],l.push(e),n.push(e)},this.pushFileFoler=function(e){i=[],l=[];for(var t in n)i[t]=n[t];i.push(e),l.push(e),n=i},this.getFileUpload=function(){return l},this.editFile=function(e){o=e},this.getDataFileEdit=function(){return o},this.getData=function(){return n},this.addFolder=function(t){var n=e.defer(),i=new r(t);return i.$save({method:"add-folder"},function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},this.checkFile=function(e){var t=["png","gif","jpg","jpeg"];if("undefined"!=typeof e){if(-1!=t.indexOf(e.split("/")[1]))return"image";switch(e.split("/")[1]){case"zip":return"zip";case"pdf":return"pdf";case"msword":return"msword";default:return"other"}}},this.formatFilesWitFolderId=function(){var e=[];for(var t in n)angular.isArray(e[n[t].folder_id])||(e[n[t].folder_id]=[]),e[n[t].folder_id].push(n[t]);s=e},this.getFileFolderMap=function(){return s},this.filesMap=function(e){var t=[];for(var r in e)t[e[r].id]=e[r];return t},this.download=function(t){var n=e.defer(),i=new r;return i.$get({id:t,method:"download"},function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},this.editFileName=function(t){var i=e.defer(),o=new r(t);return o.$update({id:t.id,method:"edit-file-name"},function(e){for(var t in n)if(n[t].id==e.id&&n[t].group==e.group){n[t]=e;break}if(e.folder_id>0||e.parent_id>0)for(var t in d)if(d[t].id==e.id){d[t]=e;break}i.resolve(e)},function(e){i.resolve(null)}),i.promise}}]);var fileUpload=angular.module("uls");fileUpload.directive("fileManager",["FileService","Upload",function(e,t){return{restrict:"EA",scope:{folderId:"=",openPicture:"&",addFile:"&",store:"@"},replace:!0,transclude:!0,templateUrl:baseUrl+"/app/shared/file-manager/views/file-manager.html",link:function(r,n,i,o){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}r.baseUrl=baseUrl;r.items_s={},r.upload=function(n,i){if(n&&n.length)for(var o=0;o<n.length;o++)!function(i){var o=n[i];return o.uniId=a(),o.proccess=0,angular.isDefined(o.name)&&(o.file_name=o.name),angular.isDefined(window.maxUpload)&&o.size>window.maxUpload.size?(o.uniId=a(),o.proccess=100,o.error=1,o.status=0,r.items_s[o.uniId]=o,void(r.items_s[o.uniId].error="Max file size is "+window.maxUpload.name)):(r.items_s[o.uniId]=o,void t.upload({url:baseUrl+"/admin/file",fields:{folderId:r.folderId,store:r.store},file:o}).progress(function(e){var t=parseInt(100*e.loaded/e.total);angular.isUndefined(r.items_s[o.uniId])||(r.items_s[o.uniId].proccess=t+"%")}).success(function(t,n,i,a){return t.status?(r.addFile()(t.item),e.pushFile(t.item),e.formatFilesWitFolderId(),r.itemsUpload={},delete r.items_s[o.uniId],void angular.element("#"+o.uniId).remove()):void(t.error&&(alert(t.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager"))}).error(function(e,t){e.status||e.error&&(alert(e.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager"),angular.element("#"+o.uniId).addClass("dz-error"),413==t?r.error="Max file size is "+window.maxUpload.name:null==e||angular.isUndefined(e)||angular.isUndefined(e.message)?r.error="Max file size is "+window.maxUpload.name:r.error=e.message}))}(o)},r.deleteFileError=function(e,t){t.stopPropagation(),delete r.items_s[e]},r.checkFile=function(t){return e.checkFile(t)}}}}]).filter("bytes",function(){return function(e,t){if(isNaN(parseFloat(e))||!isFinite(e))return"-";"undefined"==typeof t&&(t=1);var r=["bytes","kB","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+r[n]}});var fileModule=angular.module("file");fileModule.directive("files",["FileService","$timeout","$filter","ngTableParams",function(e,t,r,n){return{restrict:"EA",scope:{items:"=items",listNameUser:"=listNameUser",users:"=",isAdmin:"=",isDocumentRowboat:"=",openPicture:"&",showFolderId:"&",visibleFolder:"&",deleteFolder:"&",deleteFile:"&",editFile:"&"},replace:!0,transclude:!0,templateUrl:baseUrl+"/app/components/file/views/index.html?v=1",link:function(t,i,o,a,l){e.setFilesCurrentFolder(angular.copy(t.items)),t.baseUrl=baseUrl,t.fileName={},t.folderName={},t.$watch("items",function(r,n){r!=n&&(e.setFilesCurrentFolder(angular.copy(r)),t.tableParams.reload())}),t.tableParams=new n({page:1,count:50,sorting:{group:"desc"}},{groupBy:"group",total:t.items.length,getData:function(e,n){var i=n.sorting()?r("orderBy")(t.items,n.orderBy()):t.items;i=n.filter()?r("filter")(i,n.filter()):i,n.total(i.length),n.total()<=n.count()?n.page(1):n.total()%n.count()==0&&n.total()/n.count()<n.page()&&1!=n.page()&&n.page(n.page()-1),e.resolve(i.slice((n.page()-1)*n.count(),n.page()*n.count()))}}),t.checkFile=function(t){return e.checkFile(t)},t.editFileName=function(e,r){if("folder"==r){if(!t.folderName[e])return;var n="edit-folder-"+e,i="folder-"+e,o=t.folderName[e].length}else{if(!t.fileName[e])return;var n="edit-file-"+e,i="file-"+e,o=t.fileName[e].length-t.fileName[e].split(".").pop().length-1}angular.element("."+n).removeClass("hidden"),angular.element("."+i).addClass("hidden");var a=document.getElementById(i);a.setSelectionRange(0,o)}}}}]).directive("editFileName",["FileService","shareDataFactory",function(e,t){return{restrict:"A",link:function(r,n,i,o){function a(){if(!r.form.editFolderFile.$error.required){var n=i.fileNameEdited;e.editFileName({id:l,fileName:n,group:i.id.split("-")[0]}).then(function(e){e.status||e.error&&(alert(e.error+" Refresh this page."),window.location.href=window.baseUrl+"/document-manager"),angular.element("."+s).addClass("hidden"),angular.element("."+d).removeClass("hidden"),t.prepForBroadcase(e,"editFile")})}}var l=i.id.split("-")[1],s="edit-file-"+l,d="file-"+l;"folder"==i.id.split("-")[0]&&(s="edit-folder-"+l,d="folder-"+l),n.bind("keydow keypress",function(e){13==e.which&&a()}),n.bind("blur",function(e){a()})}}}]);