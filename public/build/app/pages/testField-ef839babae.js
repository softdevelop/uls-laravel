function humanized_time_span(e,t,i,n){function r(){for(var e=0;e<i[d].length;e++)if(null==i[d][e].ceiling||s<=i[d][e].ceiling)return i[d][e];return null}function a(){for(var e=s,t={},i=0;i<n.length;i++){var r=Math.floor(e/n[i][0]);e-=n[i][0]*r,t[n[i][1]]=r}return t}function o(e){var t=a(),i=e.text.replace(/\$(\w+)/g,function(){return t[arguments[1]]});return l(i,t)}function l(e,t){for(var i in t)if(1==t[i]){var n=new RegExp("\\b"+i+"\\b");e=e.replace(n,function(){return arguments[0].replace(/s\b/g,"")})}return e}if(i=i||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]},n=n||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]],"Invalid Date"==new Date(e))for(;-1!=String(e).indexOf("-");)e=e.replace("-","/");e=new Date(e),t=t?new Date(t):new Date;var s=(t-e)/1e3,d="past";return 0>s&&(d="future",s=0-s),o(r())}angular.module("user",[]),angular.module("permission",[]),angular.module("role",[]),angular.module("multiSelect",[]),angular.module("ticket",[]),angular.module("type",[]),angular.module("dataOption",[]),angular.module("nlcFilter",[]),angular.module("file",[]),angular.module("AppLanguage",[]),angular.module("TemplateManagerApp",[]),angular.module("RegionApp",[]),angular.module("campaignApp",[]),angular.module("campaignDetailApp",[]),angular.module("MarketsegmentApp",[]),angular.module("notification",[]),angular.module("transApp",[]),angular.module("assetManager",[]),angular.module("BlockApp",[]),angular.module("ChannelPartnersApp",[]),angular.module("roleGroup1",[]),angular.module("filedType",[]),angular.module("filed",[]),angular.module("term",[]),angular.module("customFormatDate",[]),angular.module("SeoAnalysisApp",[]),angular.module("pageApp",[]),angular.module("treeresizer",[]),angular.module("CreatePageApp",[]),angular.module("EditDraftApp",[]),angular.module("fomatHtml",[]),angular.module("colorpicker.module",[]),angular.module("formBuilderDirectiveApp",[]),angular.module("appManageTerm",[]),angular.module("TermTemplateManagerApp",[]),angular.module("configurator",[]),angular.module("TemplateContentManager",[]),angular.module("cmsContentFolderApp",[]),angular.module("lowercaseCharater",[]),angular.module("selectLevel",[]),angular.module("modalSelectLevel",[]),angular.module("configField",[]),angular.module("cmsContentInsertApp",[]),angular.module("confirmDirective",[]),angular.module("CmsApp",[]),angular.module("checkLimitAndChangeDateTimeDirectiveApp",[]),angular.module("tagContentApp",[]),angular.module("tagContentDirective",[]),angular.module("cmsContentTagApp",[]),angular.module("viewDraft",[]),angular.module("databaseManager",[]),angular.module("selectLevelDatabase",[]),angular.module("modalSelectPage",[]),angular.module("configFormDatabaseApp",[]),angular.module("historyApp",[]),angular.module("BlockNestedApp",[]),angular.module("selectLevelAsset",[]),angular.module("MaterialApp",[]),angular.module("draganddrop",[]),angular.module("activityLog",[]),angular.module("translation",[]),angular.module("HelpEditorApp",[]),angular.module("helpEditorDirective",[]),angular.module("selectLevelHelp",[]),angular.module("cache",[]),angular.module("file",[]),angular.module("treeresize",[]),angular.module("test",[]),angular.module("guide",[]),angular.module("PlatformsApp",[]),angular.module("accessories",[]);var defaultModules=["ui.bootstrap","ngResource","ngCookies","ngFileUpload","ngRoute","toggle-switch","ngImgCrop","ngTable","user","role","permission","multiSelect","ticket","type","dataOption","nlcFilter","file","xeditable","timer","AppLanguage","TemplateManagerApp","RegionApp","campaignApp","campaignDetailApp","MarketsegmentApp","notification","transApp","assetManager","BlockApp","ChannelPartnersApp","roleGroup1","filedType","filed","term","ui-iconpicker","customFormatDate","SeoAnalysisApp","pageApp","treeresizer","CreatePageApp","EditDraftApp","fomatHtml","colorpicker.module","formBuilderDirectiveApp","appManageTerm","TermTemplateManagerApp","mgo-angular-wizard","configurator","TemplateContentManager","cmsContentFolderApp","lowercaseCharater","selectLevel","configField","cmsContentInsertApp","confirmDirective","CmsApp","checkLimitAndChangeDateTimeDirectiveApp","tagContentApp","tagContentDirective","cmsContentTagApp","viewDraft","modalSelectLevel","databaseManager","selectLevelDatabase","modalSelectPage","configFormDatabaseApp","historyApp","BlockNestedApp","selectLevelAsset","MaterialApp","ui.sortable","activityLog","translation","HelpEditorApp","helpEditorDirective","selectLevelHelp","cache","file","treeresize","guide","PlatformsApp","accessories"];"undefined"!=typeof modules&&(defaultModules=defaultModules.concat(modules));var myApp=angular.module("uls",defaultModules);angular.module("uls").run(["editableOptions",function(e){e.theme="bs3"}]),angular.module("uls").config(["$logProvider",function(e){e.debugEnabled(window.debug)}]),"undefined"!=typeof angularMock&&(defaultModules=defaultModules.concat(angularMock));var goTo=function(e){window.location.href="#_"+e,$("#fix-modal-top").scrollTop(0),$("#"+e).hasClass("in")||$("#"+e).prev().trigger("click")};myApp.config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){e.defer();return{responseError:function(t){var i=angular.element(".butterbar-container");switch(t.status){case 401:return void(window.location.href=window.baseUrl);case 404:i.hasClass("hidden")&&i.removeClass("hidden");break;case 500:i.hasClass("hidden")&&i.removeClass("hidden")}return e.reject(t)}}}])}]),function(e){function t(){var t=window.innerHeight;screen.height;e(".table-responsive.set-height, .table-responsive#tb-group-user").css({height:t-170+"px"}),e(".table-animate").css({height:t-170+"px"}),e("#search-page,.box-maps").css({height:t-105+"px"}),e(".box-list-rep").css({height:t-100+"px"}),e("#load-maps").css({height:t-185+"px"})}e(document).ready(t),e(window).resize(t),e(document).ready(function(){e(".dropdown-menu table tr td button").removeAttr("style")}),e(document).ready(function(){setTimeout(function(){var t=e("#frame_html").contents().find("head");t.append('<style type="text/css">.area_toolbar{background-color:#f1f1f1;}#editor{border:solid #ccc 1px}#result{border-top:solid #ccc 1px;border-bottom: solid #ccc 1px}.editarea_popup{box-shadow: 0px 4px 36px rgba(177, 177, 177, 0.75);border: solid 1px #CCCCCC;background-color: #FFFFFF;}.area_toolbar select{font-size:9pt;background-color:#fff}</style>')},1e3)}),e(window).load(function(){e(".step3 .show-more").click(function(){e(".step3 .wrap-more-product").toggleClass("show")})}),e(document).ready(function(){e(".nav-icon").click(function(){e(this).toggleClass("open"),e("#pagehome").toggleClass("on-off")})});var i,n,r,a,o,l,s;e(".next").click(function(){return s?!1:(s=!0,i=e(this).parent(),n=e(this).parent().next(),n.show(),void i.animate({opacity:0},{step:function(e,t){l=1-.2*(1-e),a=50*e+"%",o=1-e,i.css({transform:"scale("+l+")"}),n.css({left:a,opacity:o})},duration:800,complete:function(){i.hide(),s=!1},easing:"easeInOutBack"}))}),e(".previous").click(function(){return s?!1:(s=!0,i=e(this).parent(),r=e(this).parent().prev(),r.show(),void i.animate({opacity:0},{step:function(e,t){l=.8+.2*(1-e),a=50*(1-e)+"%",o=1-e,i.css({left:a}),r.css({transform:"scale("+l+")",opacity:o})},duration:800,complete:function(){i.hide(),s=!1},easing:"easeInOutBack"}))}),e(".submit").click(function(){return!1})}(jQuery),angular.module("uls").controller("BaseController",["$scope","$parse","$timeout","$modal","UserService","AssetManagerService",function(e,t,i,n,r,a){if(angular.element(".wrapper").removeClass("hidden"),r.setData(window.usersMap),i(function(){"undefined"!=typeof e.callbackLoadUserFinish&&(e.callbackLoadUserFinish(),e.users_map=r.getUsersMap())}),e.testFuture=window.testFuture,1==e.testFuture&&angular.element(".test").removeClass("hidden"),e.windowType=window.info,"undefined"!=typeof window.info)for(var o in window.info){var l=t(o);l.assign(e,window.info[o])}e.initDate=function(){angular.element(".date").bdatepicker({format:"yyyy-mm-dd"})},e.viewModalImage=function(e){var t=n.open({templateUrl:baseUrl+"/app/components/termTemplateManager/views/modal/viewImage.html",controller:"ModalViewPictureCtrl",size:void 0,windowClass:"show-img",resolve:{fileId:function(){return e}}});t.result.then(function(e){},function(){})},e.urlForm=[],e.getUrlImageAssetForm=function(t,i){"undefined"==typeof e.urlForm[t]&&(e.urlForm[t]=[]),a.getUrlImageAsset(t).then(function(n){e.urlForm[t][i]=n.url})},e.removeThumbnailAssertForm=function(t,i){e.urlForm[t][i]=""},e.initTooltip=function(e){$('[data-toggle="tooltip"]').tooltip()}}]).controller("ModalViewPictureCtrl",["$scope","$modalInstance","fileId",function(e,t,i){e.fileId=i,e.baseUrl=baseUrl,e.cancel=function(){t.dismiss("cancel")}}]);var userModule=angular.module("user");userModule.factory("UserResource",["$resource",function(e){return e("/api/user/:method/:id",{method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"}})}]).factory("UserService",["$q","$filter","UserResource",function(e,t,i){var n=[],r=[],a=[],o=this,l={},s={};return this.setHashData=function(e){l=e},this.create=function(t){if("undefined"!=typeof t.id)return o.update(t);var r=e.defer(),a=new i(t);return a.$save({},function(e){e.status&&e.item&&(n.push(e.item),"undefined"==typeof e.item.last_login&&(e.item.last_login="0000-00-00 00:00:00")),r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.changePassword=function(t){var n=e.defer(),r=new i(t);return r.$save({method:"change-password",id:t.id},function(e){e.status?n.resolve(e):n.reject(e)},function(e){n.reject(e.data)}),n.promise},this.changeRoles=function(t){var n=e.defer(),r=new i(t);return r.$save({method:"change-roles"},function(e){e?n.resolve(e):n.reject(e)},function(e){n.reject(e.data)}),n.promise},this.update=function(t){var r=e.defer(),a=new i(t);return a.$update({id:t.id},function(e){if(e.status)for(var t in n)if(n[t].id==e.item.id){n[t]=e.item;break}r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.get=function(t){var n=e.defer();return i.get({id:t},function(e){n.resolve(e)}),n.promise},this.query=function(){var t=e.defer();return i.query(function(e){n=e,t.resolve(e)}),t.promise},this.queryUsersManager=function(){var t=e.defer();return i.query({method:"get-all-user-manager"},function(e){n=e,t.resolve(e)}),t.promise},this.remove=function(t){var r=e.defer();return i["delete"]({id:t},function(e){if(e.status)for(var i in n)if(n[i].id==t){n[i].status="no";break}r.resolve(e)}),r.promise},this.pushUser=function(e){n.push(e)},this.updateUser=function(e){for(var t in n)if(n[t].id==e.id){e.status="yes",n[t]=e;break}},this.changeAvatar=function(t,n){var r=e.defer();return i.save({method:"change-avatar",file:n,id:t},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.resetPassword=function(t){var n=e.defer();return i.save({method:"email",entity:"password",email:t},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.getUsers=function(){return n},this.getUserById=function(e){return s[e]},this.getUsersMap=function(){return s},this.listMap=function(e,t){if("role"==t)for(var i in e)r[e[i].id]=e[i];else for(var i in e)a[e[i].id]=e[i]},this.getMap=function(e){return"role"==e?r:a},this.userBranchManager=function(t){var n=e.defer();return i.query({id:t,method:"get-users-branch-manager"},function(e){n.resolve(e)}),n.promise},this.updatePermissions=function(t,n){var r=e.defer();return i.save({id:t,permissionIds:n,method:"update-permission"},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.updateGroup=function(t,n){var r=e.defer();return i.save({id:t,groupIds:n,method:"update-group"},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.updateRoles=function(t,n){var r=e.defer();return i.save({id:t,roleIds:n,method:"update-role"},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.changeStatus=function(t){var r=e.defer();return i["delete"]({id:t,method:"change-status"},function(e){if(e.status)for(var i in n)if(n[i].id==t){n[i].status="yes";break}r.resolve(e)}),r.promise},this.setData=function(e){n=e;for(var t in e)s[e[t].id]=e[t];return n},this.updateShowDueDateUser=function(t){var n=e.defer(),r=new i(t);return r.$save({method:"update-show-due-date-user"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this}]);var assetmanagerApp=angular.module("assetManager",["ngResource","ui.bootstrap","ngSanitize","ngTable"]);assetmanagerApp.factory("AssetManagerResource",["$resource",function(e){return e("/api/asset-manager/:method/:id",{method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"},editNameFolder:{method:"edit-name-folder"}})}]).service("AssetManagerService",["AssetManagerResource","$q",function(e,t){var i=this,n=[];this.createFolderProvider=function(n){if("undefined"!=typeof n.id)return i.editFolderAndFile(n);var r=t.defer(),a=new e(n);return a.$save({method:"create-folder"},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.uploadNewAsset=function(i){var r=t.defer(),a=new e(i);return a.$save({method:"upload-new-asset"},function(e){0!=e.status&&n.push(e.item),r.resolve(e.item)},function(e){r.resolve(e.data)}),r.promise},this.createNewAsset=function(i){var r=t.defer(),a=new e(i);return a.$save({method:"create-new-asset"},function(e){0!=e.status&&n.push(e.item),r.resolve(e.item)},function(e){r.resolve(e.data)}),r.promise},this.saveFieldFile=function(i){var n=t.defer(),r=new e(i);return r.$save({method:"save-file-asset"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.editFile=function(i){var n=t.defer(),r=new e(i);return r.$save({method:"edit-file"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.crop=function(i){var n=t.defer(),r=new e(i);return r.$save({method:"crop"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.addTagsForPage=function(i,n){var r=t.defer(),a=new e(n);return a.$save({id:i,method:"add-tags"},function(e){0!=e.status,r.resolve(e)},function(e){r.resolve(e.data)}),r.promise},this.getAssetManagerById=function(i){var n=t.defer(),r=new e;return r.$get({id:i},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setAssetManagers=function(e){return n=e},this.getAssetManagers=function(){return n},this.getUrlImageAsset=function(i){var n=t.defer();return e.get({id:i,method:"get-url-image-asset"},function(e){n.resolve(e)}),n.promise},this.deleteFolderAndAsset=function(i){var n=t.defer(),r=new e;return r.$delete({id:i},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.deleteAssetFile=function(i){var n=t.defer(),r=new e;return r.$get({id:i,method:"delete-file"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.editNameFolder=function(i){var n=t.defer(),r=new e(i);return r.$save({id:i.id,method:"edit-name-folder"},function(e){0!=e.status&&n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.updateContentFile=function(i,n){var r=t.defer(),a=new e(n);return a.$save({id:i,method:"update-content-file"},function(e){r.resolve(e)},function(e){r.resolve(e.data)}),r.promise}}]),angular.module("uls").controller("NotificationController",["$scope","$filter","NotificationService","$controller","$timeout",function(e,t,i,n,r){function a(){}function o(){if(c=!1,f.length>0){var e=f.shift();s(e)}}function l(){}function s(t){if(c)return void f.push(t);if(c=!0,-1==t.data.sender_id)var i=e.baseUrl+"/160x160_avatar_default.png?t=1";else var i=e.users_map[t.data.sender_id].avatar;var n=new Notify("Notification",{icon:i,body:t.data.message,tag:t.data.sender_id,notifyShow:a,notifyClose:o,notifyClick:function(){window.location.href="/"+t.data.href},notifyError:l,timeout:5});n.show()}n("BaseController",{$scope:e}),e.callbackLoadUserFinish=function(){},angular.element("#notification-top").removeClass("hidden"),e.baseUrl=window.baseUrl;var d=10;e.limitTo=d;var u=1;e.notifications=[];var f=[],c=!1;e.amount=0,$(".scroll-noti1").scroll(function(){$(this)[0].scrollHeight-$(this).scrollTop()===$(this).outerHeight()&&e.$apply(function(){e.limitTo=e.limitTo+d})});var p=RowboatPusher.subscribe("notification_ticket");p.bind("Rowboat\\Notification\\Events\\Notifications\\Broadcast\\NotificationTicket",function(t){e.$apply(function(){"undefined"!=typeof t.data.user_id&&-1!=t.data.user_id.indexOf(window.userId)&&(s(t),u=1,e.amount++)})}),e.getNotifications=function(){i.query(u).then(function(t){u&&e.setUserReadThisNotification(),e.notifications=t,e.hightlight=angular.copy(e.amount),e.amount=0,u=0})},e.setUserReadThisNotification=function(){i.setRead().then(function(){})},i.getAmountNotificationsNotRead().then(function(t){e.amount=t.result})}]);var permissionModule=angular.module("notification");permissionModule.factory("NotificationResource",["$resource",function(e){return e("/api/notification/:method/:id",{},{add:{method:"post"},save:{method:"post"}})}]).service("NotificationService",["$q","$filter","NotificationResource",function(e,t,i){var n=[];this.getAmountNotificationsNotRead=function(t){var n=e.defer();return i.get({method:"amount-notifications-not-read"},function(e){n.resolve(e)}),n.promise},this.query=function(t){var r=e.defer();return t?i.query().$promise.then(function(e){n=e,r.resolve(n)}):r.resolve(n),r.promise},this.notificationInvite=function(t){var n=e.defer(),r=new i(t);return r.$save({data:t,method:"invite"},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setRead=function(){var t=e.defer(),n=new i;return n.$save({method:"set-read"},function(e){t.resolve(e)},function(e){t.resolve(e.data)}),t.promise}}]),notificationModule=angular.module("notification"),notificationModule.directive("notification",[function(){return{restrict:"AE",scope:{item:"="},replace:!0,templateUrl:baseUrl+"/app/shared/notification/views/notification.html",link:function(){}}}]);var module=angular.module("uls");module.directive("rowboatRequired",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){"undefined"==typeof e.$eval(i.ngModel)&&n.$setValidity("rowboatRequired",!1),t.on("focus",function(r){e.$watch(i.ngModel,function(e){var i="undefined"!=typeof e&&0!=e.length;if(i)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatRequired",i);else if(0==t.parent().find("span").length){t.parent().addClass("error");var r='<span class="control-label">It is required</span>';t.parent().append(r),n.$setValidity("rowboatRequired",i)}})})}}}),module.directive("rowboatLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){"undefined"!=typeof e.$eval(i.ngModel)&&e.$eval(i.ngModel).length!=i.rowboatLength&&n.$setValidity("rowboatLength",!1),t.on("focus",function(r){e.$watch(i.ngModel,function(e){var r=i.rowboatLength,a="undefined"!=typeof e&&e.length==r;if(a)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatLength",a);else if(0==t.parent().find("span").length){t.parent().addClass("error");var o='<span class="control-label">Length is '+r+"</span>";t.parent().append(o),n.$setValidity("rowboatLength",a)}})})}}}),module.directive("rowboatMinLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){"undefined"!=typeof e.$eval(i.ngModel)&&e.$eval(i.ngModel).length<i.rowboatMinLength&&n.$setValidity("rowboatMinLength",!1),t.on("focus",function(r){e.$watch(i.ngModel,function(e){var r=i.rowboatMinLength,a="undefined"!=typeof e&&e.length>=r;if(a)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatMinLength",a);else if(0==t.parent().find("span").length){t.parent().addClass("error");var o='<span class="control-label">Min length is '+r+"</span>";t.parent().append(o),n.$setValidity("rowboatMinLength",a)}})})}}}),module.directive("rowboatMaxLength",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){"undefined"!=typeof e.$eval(i.ngModel)&&e.$eval(i.ngModel).length>i.rowboatMaxLength&&n.$setValidity("rowboatMaxLength",!1),t.on("focus",function(r){e.$watch(i.ngModel,function(e){var r=i.rowboatMaxLength,a="undefined"!=typeof e&&e.length<=r;if(a)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatMaxLength",a);else if(0==t.parent().find("span").length){t.parent().addClass("error");var o='<span class="control-label">Max length is '+r+"</span>";t.parent().append(o),n.$setValidity("rowboatMaxLength",a)}})})}}}),module.directive("rowboatEmailPattern",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){$pattern=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,"undefined"==typeof e.$eval(i.ngModel)&&n.$setValidity("rowboatEmailPattern",!1),t.on("blur",function(r){e.$watch(i.ngModel,function(e){var i="undefined"!=typeof e&&$pattern.test(e);if(i)t.parent().find("span").remove(),t.parent().removeClass("error"),n.$setValidity("rowboatEmailPattern",i);else if(0==t.parent().find("span").length){t.parent().addClass("error");var r='<span class="control-label">Email Invalid</span>';t.parent().append(r),n.$setValidity("rowboatEmailPattern",i)}})})}}});var filterDate=angular.module("customFormatDate",[]);filterDate.filter("myDate",["$filter",function(e){return function(t,i){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var n=e("date")(new Date(String(t)),angular.isUndefined(i)?"MM-dd-yyyy":i);return String(n)}}]).filter("myDateL",["$filter",function(e){return function(t){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var i=e("date")(new Date(String(t)),"MMMM d, y");return String(i)}}]).filter("myDateTime",["$filter",function(e){return function(t){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var i=e("date")(new Date(String(t)),"MM-dd-yyyy HH:mm:ss");return String(i)}}]).filter("myDateShortTime",["$filter",function(e){return function(t){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var i=e("date")(new Date(String(t)),"MM-dd-yyyy h:mma");return String(i)}}]).filter("clientDate",["$filter",function(e){return function(t,i){if(null==t)return"";if("0000-00-00 00:00:00"==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";t=new Date(t),t=new Date(parseInt(new Date(t).getTime())-60*parseInt((new Date).getTimezoneOffset())*1e3);var n=e("date")(new Date(String(t)),angular.isUndefined(i)?"MM-dd-yyyy":i);return String(n)}}]).filter("clientDateTime",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.dateTimeFormat)}}]).filter("clientLogDate",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.logDate)}}]).filter("clientMediumDate",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.mediumDate)}}]).filter("clientShortTime",["$filter",function(e){return function(t){return e("date")(checkInvalid(t),window.shortTime)}}]).filter("clientShortTimeFollowTimezone",["$filter",function(e){return function(t,i){if(null==t)return"";if("Invalid Date"==new Date(t))for(;-1!=String(t).indexOf("-");)t=t.replace("-","/");if("Invalid Date"==new Date(t))return"";var n=e("date")(new Date(String(t)),window.shortTime);return String(n)}}]).filter("formatCurrentDate",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getMonth()+"-"+e.getDate()+"-"+e.getFullYear();return String(t)}}]).filter("formatCurrentTime",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getHours()>=12?"pm":"am",i=parseInt(e.getHours())%12;i=i?10>i?"0"+i:i:12;var n=parseInt(e.getMinutes())<10?"0"+e.getMinutes():e.getMinutes(),r=parseInt(e.getSeconds())<10?"0"+e.getSeconds():e.getSeconds(),a=i+"-"+n+"-"+r+" "+t;return String(a)}}]).filter("formatCurrentShortTime",["$filter",function(e){return function(e){if(e=checkInvalid(e),!e)return"";e=new Date(e);var t=e.getHours()>=12?"pm":"am",i=parseInt(e.getHours())%12;i=i?10>i?"0"+i:i:12;var n=parseInt(e.getMinutes())<10?"0"+e.getMinutes():e.getMinutes(),r=i+":"+n+" "+t;return String(r)}}]);var checkInvalid=function(e,t){if(null==e)return"";if("Invalid Date"==new Date(e))for(;-1!=String(e).indexOf("-");)e=e.replace("-","/");return"Invalid Date"==new Date(e)?"":(e=new Date(e),e=new Date(parseInt(new Date(e).getTime())-60*parseInt((new Date).getTimezoneOffset())*1e3),new Date(String(e)))};angular.module("nlcFilter").filter("elapsedtime",function(){return function(e){return humanized_time_span(e)}});var translation=angular.module("translation",[]);translation.filter("trans",["$filter",function(e){return function(e,t){return null==e?"":window.translations[t][e]}}]);var selectLevel=angular.module("helpEditorDirective",[]),version=5;selectLevel.directive("helpEditorDirective",["$timeout","$filter",function(e,t){return{require:"?ngModel",restrict:"EA",scope:{items:"=",text:"@",selectedItems:"=selectedItem",onClick:"&"},replace:!0,templateUrl:baseUrl+"/app/components/user/help-editor/view/view-help.html?v="+(new Date).getTime(),link:function(t,i,n,r){t.description="",t.recursiveGetDescription=function(e){angular.forEach(e,function(e,i){e.parent=!1,t.description+='<strong class="space-topic" id="_'+e._id+'">'+e.name+"</strong>"+e.description,e.subFolder.length>0&&t.recursiveGetDescription(e.subFolder)})},t.getDesctiption=function(){angular.forEach(t.items,function(e,i){e.parent=!0,t.description+='<h4 id="_'+e._id+'" class="c-primary">'+e.name+'</h4><div class="space-area user-ad-area">'+e.description,t.recursiveGetDescription(e.subFolder),t.description+="</div>"})},t.getDesctiption(),t.goToAnchorWithId=function(e){window.location.href="#"+e,$("#fix-modal-top").scrollTop(0)},e(function(){$(".sub-select-"+t.items[0]._id).addClass("in")})}}}]);var dataOption=angular.module("filed");dataOption.controller("filedController",["$scope","$compile","filedService","filedTypeService","$filter","ngTableParams","$filter","$timeout","$controller",function(e,t,i,n,r,a,r,o,l){l("BaseController",{$scope:e}),angular.element(".wrap-branch").removeClass("hidden"),e.callbackLoadUserFinish=function(){},e.dataOption=0,e.fields=angular.copy(i.setFields(window.fields)),e.listRequiredFieldType_Map=window.listRequiredFieldType_Map,e.getAllField=function(){e.tableParams=new a({page:1,count:10},{total:e.fields.length,getData:function(t,i){var n=i.sorting()?r("orderBy")(e.fields,e.tableParams.orderBy()):e.fields;t.resolve(n.slice((i.page()-1)*i.count(),i.page()*i.count()))}})},e.deleteField=function(t){confirm("All changes will be lost if this is changed. Do you want to proceed?")&&i.remove(t).then(function(){e.fields=i.getFields(),e.tableParams.reload()})}}]).controller("createFiledController",["$scope","$timeout","$filter","filedService","filedTypeService",function(e,t,n,r,a){e.field=window.field,e.openedLimitDate=!1,e.listType=window.listType,window.formatDate&&(1==window.formatDate?e.formatDate="yyyy-MM-dd":e.formatDate=window.formatDate),e.lengthAttribute=function(){var t="",n="";e.validateLength=!1;for(i in e.field.html_attributes)"minlength"==e.field.html_attributes[i].key&&e.field.html_attributes[i].value&&(t=e.field.html_attributes[i].value),"maxlength"==e.field.html_attributes[i].key&&e.field.html_attributes[i].value&&(n=e.field.html_attributes[i].value);t&&n&&t>n&&(e.validateLength=!0)},e.changeDate=function(){var t="",n="";e.checkDate=!1;for(i in e.field.html_attributes)"min-date"!=e.field.html_attributes[i].key&&"min"!=e.field.html_attributes[i].key||!e.field.html_attributes[i].value||(t=e.field.html_attributes[i].value),"max-date"!=e.field.html_attributes[i].key&&"max"!=e.field.html_attributes[i].key||!e.field.html_attributes[i].value||(n=e.field.html_attributes[i].value);if(n&&t){var r=new Date(t),a=new Date(n);r>a&&(e.checkDate=!0)}},e.createField=function(a,o){if(e.submitted=!0,!e.checkDate&&!e.validateLength&&!a){angular.element("#bt-submit").attr("disabled","true"),angular.element("#bt-submit-new").attr("disabled","true");for(i in e.field.html_attributes)"min-date"!=e.field.html_attributes[i].key&&"max-date"!=e.field.html_attributes[i].key||(e.field.html_attributes[i].value=n("date")(e.field.html_attributes[i].value,"yyyy-MM-dd")),""==e.field.html_attributes[i].value&&delete e.field.html_attributes[i];r.create(e.field).then(function(i){0==i.status?(e.error="Name is Exist",angular.element("#bt-submit").removeAttr("disabled"),angular.element("#bt-submit-new").removeAttr("disabled")):e.field._id?window.location=window.baseUrl+"/admin/field":o?(e.field={},e.filedTypeAttributes={},e.submitted=!1,e.errorMessage=!0,angular.element("#bt-submit").removeAttr("disabled"),angular.element("#bt-submit-new").removeAttr("disabled"),t(function(){$(".select-field-type").select2("val","")}),t(function(){e.errorMessage=!1},5e3)):window.location=window.baseUrl+"/admin/field"})}},t(function(){$(".select-field-type").select2()}),e.getFieldAttributes=function(){angular.isDefined(e.field)||(e.field={}),e.field.html_attributes={},"undefined"!=typeof e.field.field_type_id&&a.getFieldAttributes(e.field.field_type_id).then(function(t){e.formatDate="",t.formatDate&&(1==t.formatDate?e.formatDate="yyyy-MM-dd":e.formatDate=t.formatDate);for(var i in t.filedTypeAttributes)e.field.html_attributes[i]={},1!=t.filedTypeAttributes[i].value&&(0==t.filedTypeAttributes[i].value.indexOf("&")?(t.filedTypeAttributes[i].attr="&",e.field.html_attributes[i].orveride="&",t.filedTypeAttributes[i].value=t.filedTypeAttributes[i].value.replace("&","")):0==t.filedTypeAttributes[i].value.indexOf("*")&&(t.filedTypeAttributes[i].attr="*",e.field.html_attributes[i].orveride="*",t.filedTypeAttributes[i].value=t.filedTypeAttributes[i].value.replace("*","")),e.field.html_attributes[i].key=t.filedTypeAttributes[i].key,e.field.html_attributes[i].value=t.filedTypeAttributes[i].value);e.field.html_attributes=t.filedTypeAttributes,e.field.term=t.term}).then(function(){})}}]);var typeModule=angular.module("filed");typeModule.factory("filedResource",["$resource",function(e){return e("/api/field/:method/:id",{method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"}})}]).service("filedService",["$q","$filter","filedResource",function(e,t,i){var n=this,r=[];this.create=function(t){if("undefined"!=typeof t._id)return n.update(t);var r=e.defer(),a=new i(t);return a.$save({},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},this.update=function(t){var n=e.defer(),r=new i(t);return r.$update({id:t._id},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.remove=function(t){var n=e.defer();return i["delete"]({id:t},function(e){n.resolve(e)}),n.promise},this.remove=function(t){var n=e.defer(),a=new i;return a.$delete({id:t},function(e){if(0!=e.status)for(var i in r)if(r[i]._id==t){r.splice(i,1);break}n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setFields=function(e){return r=e},this.getFields=function(e){return r}}]);var typeModule=angular.module("filedType");typeModule.factory("filedTypeResource",["$resource",function(e){return e("/api/field-type/:method/:id",{
method:"@method",id:"@id"},{add:{method:"post"},save:{method:"post"},update:{method:"put"}})}]).service("filedTypeService",["$q","$filter","filedTypeResource",function(e,t,i){var n=this,r=[];this.query=function(){var t=e.defer();return i.query(function(e){t.resolve(e)}),t.promise},this.create=function(t){if("undefined"!=typeof t._id)return n.update(t);var r=e.defer(),a=new i(t);return a.$save({},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},this.update=function(t){var n=e.defer(),r=new i(t);return r.$update({id:t._id},function(e){n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.changeCategory=function(t){var n=e.defer();return i.get({id:t,method:"get-category"},function(e){n.resolve(e)}),n.promise},this.changeOutputType=function(t){var n=e.defer();return i.get({id:t,method:"get-output-type"},function(e){n.resolve(e)}),n.promise},this.remove=function(t){var n=e.defer();return i["delete"]({id:t},function(e){n.resolve(e)}),n.promise},this.getFieldAttributes=function(t){var n=e.defer();return i.get({id:t,method:"get-field-attributes"},function(e){n.resolve(e)}),n.promise},this.remove=function(t){var n=e.defer(),a=new i;return a.$delete({id:t},function(e){if(0!=e.status)for(var i in r)if(r[i]._id==t){r.splice(i,1);break}n.resolve(e)},function(e){n.resolve(e.data)}),n.promise},this.setFieldTypes=function(e){return r=e},this.getFieldTypes=function(e){return r}}]),function(e){angular.module("formBuilderDirectiveApp",[]).directive("switchBootstrap",["$parse","$timeout",function(e,t){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){e.isDisable=!1,angular.isDefined(window.isDisable)&&(e.isDisable=window.isDisable),t.bootstrapSwitch({}),window.isDisable||t.on("switchChange.bootstrapSwitch",function(t,i){n&&e.$apply(function(){n.$setViewValue(i)})}),e.$watch(i.ngModel,function(i,r){i?(n.$setViewValue(!0),t.bootstrapSwitch("state",!0,!0)):(n.$setViewValue(!1),t.bootstrapSwitch("state",!1,!0)),t.bootstrapSwitch("disabled",e.isDisable,e.isDisable)})}}}]).directive("limitTo",[function(){return{restrict:"A",link:function(e,t,i){var n=999999999999999;"number"==i.type&&(n=7),"text"==i.type&&(n=255),t.bind("keypress",function(e){return t[0].value.length>=n?(e.preventDefault(),!1):void 0})}}}]).directive("select2",["$timeout",function(t){return{restrict:"A",require:"?ngModel",replace:!0,link:function(i,n,r,a){function o(t){return e(n).find('[value="? undefined:undefined ?"]').remove(),e("<span>"+t.text+"</span>")}i.$watch(r.ngModel,function(r,o){angular.isDefined(a.$modelValue)&&a.$modelValue==a.$modelValue?(i.valueActived=a.$modelValue,t(function(){e(n).select2().val(i.valueActived).change()})):t(function(){e(n).select2().val("").change()})}),t(function(){e(n).select2({templateResult:o}),e(n).removeClass("form-control")},500)}}}]).directive("multiSelect",["$parse","$timeout",function(t,i){return{restrict:"A",require:"?ngModel",link:function(t,n,r,a){var o=[];t.isDisable=!1,angular.isDefined(window.isDisable)&&(t.isDisable=window.isDisable),t.$watch(r.ngModel,function(r,a){i(function(){angular.isDefined(r)&&(angular.isUndefined(a)||0==o.length)&&(o=r,e(n).multiSelect("select",r)),t.isDisable&&e(n).multiSelect({disabledClass:"disabled"})})}),t.isDisable||e(n).multiSelect({})}}}]).directive("colorPicker",["$parse","$compile","$timeout",function(t,i,n){return{restrict:"A",require:"?ngModel",link:function(i,n,r,a){function o(e,t){e.$setViewValue(t),e.$render(),s(t)}function l(e,t){var i;return i=e.length>5?-1!=a.$viewValue.indexOf("#")?String(e).substring(1,7):String(e).substring(1,6):e}function s(t){e(n).spectrum({color:t,preferredFormat:"hex",allowEmpty:!0,showInitial:!0,showInput:!0,disabled:i.isDisable,change:function(e){o(a,e.toHexString()),a.$parsers.push(function(e){return a.$viewValue=l(e,a),a.$render(),-1==a.$viewValue.indexOf("#")&&(a.$viewValue="#"+a.$viewValue),a.$viewValue})}})}i.isDisable=!1,angular.isDefined(window.isDisable)&&window.isDisable&&(i.isDisable=!0);var d=t(r.ngModel);d=d(i),d==d&&angular.isDefined(d)&&d?o(a,d):o(a,"#f00"),i.$watch(r.ngModel,function(e,t){angular.isDefined(a.$modelValue)&&o(a,a.$modelValue)})}}}]).directive("datepickerRowboat",["$compile",function(e){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){t.bind("click",function(){var t=i.isOpen;e.$apply(function(){angular.isUndefined(e[t])?e[t]=!0:e[t]=!e[t]})})}}}]).directive("uimaskRowboat",["$compile",function(e){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){var r=t.attr("ui-mask");t.mask(r)}}}]).directive("redactor",["$compile","$timeout","$parse",function(t,i,n){return{restrict:"A",require:"?ngModel",link:function(t,r,a,o){var l=!1;if(angular.isDefined(window.isDisable)&&window.isDisable&&i(function(){e(r).redactor("button.disableAll")}),t.$watch(a.ngModel,function(i,n){return l?void(l=!1):void(angular.isDefined(o.$modelValue)&&o.$modelValue==o.$modelValue&&(e(r).redactor("code.set",o.$modelValue),"<div></div>"!=o.$modelValue&&""!=o.$modelValue&&"<br>"!=o.$modelValue||(t.checkRequired=!0)))}),t.inited=0,window.redactorInited){if(l)return void(l=!1);var s=n(a.ngModel);return void(angular.isDefined(s(t))&&s(t)==s(t)&&e(r).redactor("code.set",s(t)))}e(r).redactor({imageUpload:"/content/upload",plugins:["table"],callbacks:{blur:function(e){var i=this.code.get();"<div></div>"!=i&&""!=i&&"<br>"!=i||(t.checkRequired=!0),o.$setViewValue(i),l=!0},change:function(e){if(!a.disabled){var i=this.code.get();"<div></div>"!=i&&""!=i&&"<br>"!=i||(t.checkRequired=!0),o.$setViewValue(i),l=!0}},insertedTable:function(e){var t=this.code.get();o.$setViewValue(t),l=!0},init:function(){t.inited=1,i(function(){e(r).each(function(t,i){o.$modelValue&&angular.isDefined(o.$modelValue)&&angular.isDefined(e.data(i,"redactor"))&&e(r).redactor("code.set",o.$modelValue)})})}},focus:!1,minHeight:300})}}}]).directive("uploadFile",["$http","$parse","$timeout","Upload",function(e,t,i,n){return{restrict:"EA",require:"?ngModel",scope:{files:"=",fileIds:"=",openPicture:"&",disabled:"=",isUploading:"&"},priority:1,replace:!0,transclude:!0,templateUrl:baseUrl+"/app/shared/form-builder-directive/views/file-upload.html?v="+(new Date).getTime(),link:function(e,t,r,a){function o(){r.ngMultiple||(r.ngMultiple="true");var t="true"===r.ngMultiple;if("true"!=r.ngMultiple?(e.ngMultiple=!1,"false"==r.ngMultiple?e.uploadMultiple=t:e.uploadMultiple="one"):(e.ngMultiple=t,e.uploadMultiple=t),"undefined"!=typeof a.$modelValue&&null!=a.$modelValue){if("one"==e.uploadMultiple){e.hideIconLoading=!0;var i=e.listFilesFormBuilder[a.$modelValue],n=[];n.uniId=d(),n.proccess=100,n.error=0,angular.isDefined(i)&&(n.name=i.file_name,n.file_name=i.file_name,n.id=i.id,n.size=i.size,n.type=i.type),e.fileUploadIds=a.$modelValue,e.fileUpload[n.uniId]=n,a.$setViewValue(e.fileUploadIds),e.hideIconLoading=!1,u(e.fileUpload)}else if(e.fileUploadIds=[],angular.isArray(a.$modelValue)){for(var o=0;o<a.$modelValue.length;o++){var l=a.$modelValue.length;e.hideIconLoading=!0;var i=e.listFilesFormBuilder[a.$modelValue[o]],n=[];n.uniId=d(),n.proccess=100,n.error=0,angular.isDefined(i)&&(n.name=i.file_name,n.file_name=i.file_name,n.id=i.id,n.size=i.size,n.type=i.type),e.fileUploadIds.push(a.$modelValue[o]),e.fileUpload[n.uniId]=n,l==e.fileUploadIds.length&&(e.hideIconLoading=!1)}a.$setViewValue(e.fileUploadIds),angular.isDefined(a.$modelValue)&&o==a.$modelValue.length&&u(e.fileUpload)}}else e.fileUpload={}}function l(e){c()}function s(e){var t=["png","gif","jpg","jpeg"];if("undefined"!=typeof e){if(-1!=t.indexOf(e.split("/")[1]))return"image";switch(e.split("/")[1]){case"zip":return"zip";case"pdf":return"pdf";case"msword":return"msword";default:return"other"}}}function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function u(t){if(angular.isDefined(e.fileUploaded)&&!e.fileUploaded.length)for(var i in t)e.fileUploaded.push(t[i])}e.disabled=window.isDisable;var f=0;e.baseUrl=baseUrl,e.fileUpload={},e.fileUploaded=[],e.fileUploadIds=[],e.fileError={},e.accept=r.accept,e.uploadFinish=!0,e.listFilesFormBuilder=window.listFilesFormBuilder,e.isLoadField={},e.numberFileUpload=[];var c=e.$watch(function(){o()},l);e.upload=function(t){if(e.fileUploaded=[],t&&t.length){f++,angular.isUndefined(e.numberFileUpload[f])&&(e.numberFileUpload[f]=[]);for(var o=0;o<t.length;o++)"image"==r.accept&&r.accept!=s(t[o].type)||(e.isUploading({status:!0}),function(o){"one"==e.uploadMultiple&&(e.fileUpload={});var l=t[o];l.uniId=d(),l.proccess=0,l.error="",e.isUploadServe=r.isUploadServe,e.fileUpload[l.uniId]=l,angular.isDefined(window.maxUpload.size)&&l.size>window.maxUpload.size?(angular.isUndefined(e.fileError[l.uniId])&&(e.fileError[l.uniId]={}),e.fileError[l.uniId].status=0,e.fileError[l.uniId].error="Max file size is "+window.maxUpload.name,e.fileUpload[l.uniId].error="Max file size is "+window.maxUpload.name,e.uploadFinished=!0,a.$setViewValue(e.fileUploadIds)):n.upload({method:"POST",url:baseUrl+"/upload-form-builder/file",file:l,data:r.isUploadServe}).progress(function(t){var i=parseInt(100*t.loaded/t.total);if(e.fileIsUploading=!0,angular.isDefined(e.fileUpload[l.uniId])){e.fileUpload[l.uniId].proccess=i;var n=Object.keys(angular.extend({},e.fileUpload)).length,r=Object.keys(angular.extend({},e.fileUpload));for(var a in e.fileUpload)if(a==r[n-1]&&100==e.fileUpload[a].proccess)e.isUploading({status:!1});else if(e.fileUpload[a].proccess<100)break}}).error(function(i,n,r,a){t.splice(1,o),angular.isDefined(e.fileUpload[l.uniId])&&(i&&angular.isDefined(i.message)&&(e.fileUpload[l.uniId].error=i.message),e.fileError[a.file.uniId]=a.file,e.fileError[a.file.uniId].status=i.status)}).success(function(t,i,n,r){angular.isDefined(e.fileUpload[r.file.uniId])&&(e.isUploadServe?(t.item.uniId=r.file.uniId,"one"==e.uploadMultiple?(e.fileUploaded=t.item,e.fileUploadIds=t.item.id):(e.fileUploaded.push(t.item),e.fileUploadIds.push(t.item.id)),e.listFilesFormBuilder[t.item.id]=t.item):"one"==e.uploadMultiple?(e.fileUploaded=r.file.uniId,e.fileUploadIds=r.file):(e.fileUploaded.push(r.file.uniId),e.fileUploadIds.push(r.file)))})["finally"](function(){e.uploadFinished=!0,i(function(){a.$setViewValue(e.fileUploadIds)})})}(o))}},a.$render=function(){e.filesUpload=a.$viewValue},e.checkFile=function(e){return s(e)},e.deleteFile=function(t){if(delete e.fileUpload[t],"one"==e.uploadMultiple)e.fileUploadIds=[],e.uploadFinished=!0,a.$setViewValue(null);else for(var i in e.fileUploaded)if(t==e.fileUploaded[i].uniId){var n=e.fileUploadIds.indexOf(e.fileUploaded[i].id);e.fileUploadIds.splice(n,1),e.uploadFinished=!0,e.fileUploadIds.length?a.$setViewValue(e.fileUploadIds):a.$setViewValue(null)}},e.$on("emptyFiles",function(t,i){e.fileUpload={},e.fileUploaded=[],e.fileUploadIds=[]})}}}]).directive("refreshCheckbox",["$compile",function(e){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){e.$watch(i.ngModel,function(e,i){angular.isDefined(n.$modelValue)&&(1==n.$modelValue&&n.$setViewValue(!0),t.attr("checked",n.$modelValue))})}}}]).filter("bytes",function(){return function(e,t){if(isNaN(parseFloat(e))||!isFinite(e))return"-";"undefined"==typeof t&&(t=1);var i=["bytes","kB","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+i[n]}})}(jQuery);var selectLevel=angular.module("selectLevel",[]),version=5;selectLevel.directive("selectLevel",["$timeout","$filter",function(e,t){return{require:"?ngModel",restrict:"EA",scope:{items:"=",text:"@",title:"@",textFilter:"@",index:"=",key:"=",itemChoose:"=",selectedItems:"=selectedItem",onClick:"&",currentPage:"=",showIcon:"=",typeSelect:"=",disableClick:"=",notSelectCurrent:"=",chageType:"=",type:"=",canChooseFolder:"="},replace:!0,templateUrl:baseUrl+"/app/shared/select-level/view.html?v="+(new Date).getTime(),link:function(i,n,r,a){function o(e){var t={};return angular.forEach(e,function(e,i){t[e]=i}),t}i.currentIndex={value:0},"Asset"==i.type&&(i.items=window.assets),i.$watch("selectedItems",function(t,n){angular.isDefined(t)&&null!=t&&e(function(){var e={_id:t.selectedItemId,name:t.selectedItemName,parentIds:t.parentIds};i.selectedItem(e)})});var l="";"undefined"==typeof i.index&&(i.index=0),"undefined"==typeof i.key&&(i.key=0),e(function(){$(document).on("click",function(e){$("#select-level-modal-"+i.key+"-"+i.index).hasClass("in")&&!$(".js-filterable-field").is(":focus")&&($("#select-level-modal-"+i.key+"-"+i.index).collapse("hide"),$(".show-sub-select i").removeClass("fa fa-folder-open fa").addClass("fa fa-folder"))}),$("#select-level li:has(ul)").children("ul").addClass("off"),$("#select-level li a i").addClass("fa fa-folder"),i.listsId=[],i.showSubSelect=function(e,t){e.preventDefault(),$(e.currentTarget).parent().find("ul:first").toggleClass("off"),$(e.currentTarget).find("i").addClass("fa fa-folder"),$(e.currentTarget).find("i").toggleClass("fa fa-folder-open fa"),e.stopPropagation()},"undefined"!=typeof i.itemChoose&&d(i.items)}),i.focusInput=function(e){e.stopPropagation()};var s=0;i.selectedItem=function(e,n){""!=e._id&&"Assets"==i.typeSelect&&2>=s&&(1==Object.keys(e.parentIds).length?angular.forEach(i.items,function(t,n){t._id==e._id&&(i.items=[],i.items.push(t))}):angular.forEach(i.items,function(t,n){t._id==e.parentIds[Object.keys(e.parentIds).length-1]&&(i.items=[],i.items.push(t))})),s+=1,angular.isDefined(i.currentPage)&&angular.isDefined(e)&&e._id==i.currentPage._id||(angular.isDefined(n)&&n.preventDefault(),(angular.isDefined(e.parentIds)||angular.isDefined(e.parentId)||angular.isDefined(e.parent_id))&&""!=e.name?i.text=e.name:i.text=t("trans")("select-folder","directive-select-level"),a.$setViewValue(e._id),i.chageType&&i.onClick({pageId:e._id}),$("#select-level-modal-"+i.key+"-"+i.index).find(".name-select.active").removeClass("active"),l=e,$("#select-level-modal-"+i.key+"-"+i.index).find(".item-"+l._id).addClass("active"),angular.isDefined(n)&&$("#select-level-modal-"+i.key+"-"+i.index).collapse("hide"))},i.toggleSelectMenu=function(t){e(function(){i.itemsTmp=i.items}),"disabled"!=i.disableClick&&e(function(){if($(".show-sub-select").removeClass("active"),$("#select-level li a i").removeClass("fa fa-folder-open fa").addClass("fa fa-folder"),$(".parrent-select").addClass("off"),l)if(angular.forEach($(".item-"+l._id).parents("ul"),function(e,t){$(e).removeClass("off")}),$(".show-sub-select-"+l._id).addClass("active"),"Link"==i.type){var e=o(window.listsIdsMapPageAndContent);angular.forEach(l.parentIds,function(t,i){$(".show-sub-select-"+e[t]).find("i").removeClass("fa fa-folder").addClass("fa fa-folder-open fa")})}else angular.forEach(l.parentIds,function(e,t){l._id!=e&&$(".show-sub-select-"+e).find("i").removeClass("fa fa-folder").addClass("fa fa-folder-open fa")});$("#select-level-modal-"+i.key+"-"+i.index).collapse("toggle")})},i.closed=function(e){$("#select-level-modal-"+i.key+"-"+i.index).collapse("hide")};var d=function(e){for(var t in e)if(e[t].subFolder&&d(e[t].subFolder),e[t]._id==i.itemChoose){i.text=e[t].name;break}}}}}]);